---
title: Governance Indicators
author: ''
date: '2022-10-19'
categories:
  - Reports
slug: world-gov-indicators
autoThumbnailImage: no
thumbnailImagePosition: left
thumbnailImage: https://res.cloudinary.com/dqtnflaeh/image/upload/v1666019877/world_thumb_ret92f.png
coverImage: https://res.cloudinary.com/dqtnflaeh/image/upload/v1666106580/world_continents_partial_2_pvadnp.svg
coverSize: partial
metaAlignment: center
---

This report presents six broad dimensions of governance for over 215 countries and territories over the period 1996-2021.

<!--more-->

```{r setup, echo=FALSE, message=FALSE}
# Environment Setup
library(tidyverse)
library(klippy)
library(rvest)
library(janitor)
library(plotly)
library(countrycode)
library(knitr)
library(crosstalk)
library(htmlwidgets)
library(DT)
library(gt)
library(ggimage)
# klippy::klippy(c("r", "python", "sql"), position = "right")
knitr::opts_chunk$set(collapse = TRUE)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(fig.width = unit(7.78, "cm"), fig.height = unit(10, "cm"))
```

<!-- <a class="header-title-link" href="http://renanperes.com" aria-label="Go to homepage">Homeüíª</a> -->

```{css styles, echo=FALSE}

#header .header-title .header-title-link {
    color: #349ef3;
    font-family: inherit;
    font-weight: 400;
    font-size: 1.6em;
    text-decoration: auto;
}


ol {
    display: block;
    list-style-type: decimal;
    font-size: 19px;
    margin-block-start: 0em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: 40px;
}

.post-header-cover .post-header .post-title {
    max-width: 750px;
    margin: 0 auto;
    color: #141414;
    text-shadow: 0 2px 0 #f7f8f8;
    margin-bottom: 20px;
}

.post-header-cover .post-header .post-meta {
    display: none
}

p{
    font-size: 1.9rem;
}


.post .post-content :not(blockquote):not(li):not(.alert)>p {
    margin: 0em 0 0 0;
}

.post .post-content {
    text-rendering: optimizelegibility;
    letter-spacing: -.3px;
    font-family: "Open Sans",serif;
    color: #5d686f;
    margin-top: 20px;
    font-weight: 400;
    overflow: hidden;
}

h1{
    margin: 1em 0 0em 0;
}

<!-- h1{ -->
<!--     letter-spacing: -.04em; -->
<!--     font-family: "Open Sans",sans-serif; -->
<!--     font-weight: 700; -->
<!--     line-height: 1.45em; -->
<!--     color: #29b542; -->
<!-- } -->
```

**Last Update:** `r format(lubridate::now('US/Eastern'), ' %B %d, %Y - %H:%M')`

# Table of Contents

1.  [Introduction]
2.  [Motivation] üí°
3.  [Dataset]üóíÔ∏è
4.  [Data Preparation] üíª
5.  [Visualizations] üìà
6.  [Conclusion]
7.  [References]

# Introduction

Governance consists of the traditions and institutions by which authority in a country is exercised. This includes the process by which governments are selected, monitored, and replaced; the government's capacity to effectively formulate and implement sound policies; and the respect of citizens and the state for the institutions that govern economic and social interactions among them.This report is based on the data source [*Worldwide-Governance-Indicators*](https://datacatalog.worldbank.org/search/dataset/0038026/Worldwide-Governance-Indicators) (Sep 23, 2022) which includes six broad indicators of a country's governance between the periods of 1996-2021.

# Motivation

As a worldwide traveler who has just recently been in an almost 3-month study abroad program in Europe - traveling across 13 different countries, I had always been curious in understanding how each country's government operates and how they have progressed over time. Indeed, when I was navigating through <https://www.worldbank.org/> looking for a dataset to perform some analyzes, I couldn't choose any dataset other than the [*Worldwide-Governance-Indicators*](https://datacatalog.worldbank.org/search/dataset/0038026/Worldwide-Governance-Indicators) (Sep 23, 2022) to release my first open-source data analysis project.

# Dataset

The dataset lists composite governance indicators based on over 30 underlying data sources. It reports on six broad dimensions of governance for over 215 countries and territories over the period 1996-2021 which are:

1.  Control of Corruption;
2.  Government Effectiveness;
3.  Political Stability and Absence of Violence;
4.  Regulatory Quality;
5.  Rule of Law;
6.  Voice and Accountability.

Feel free to download the raw data if you want to perform some analyzes as well!

#### [[Download Raw Data](/WGIData.csv)]

```{r import, message=FALSE, echo=TRUE}
# DATA IMPORTING
# url <- "https://databank.worldbank.org/data/download/WGI_csv.zip"
# directory <- getwd()
# tf <- tempfile(tmpdir = directory, fileext = ".zip")
# download.file(url, tf)
# unzip(tf)
df_data <- read_csv("WGIData.csv")
df_country <- read_csv("WGICountry.csv")
df_continent <- countrycode::codelist %>% select(continent, wb, country.name.en, iso2c, unicode.symbol)
print(df_data)

print(df_country)

print(df_continent)
```

# Data Preparation

During the preparation I had to pivot the years into a single variable and add the corresponding continent to each country.

#### [[View Table in Full Screen](/widgets/WGI_DT.html)]

```{r prepare, echo=TRUE}
# DATA FRAME
# Cleaning
df_data <- df_data %>% 
              clean_names() %>%
              select(-c("indicator_code","x28")) %>%
              mutate_all(~str_to_lower(.)) %>% 
              pivot_longer(-c("country_name", "country_code", "indicator_name"), 
                           names_to = "year", 
                           values_to = "value") %>% 
              mutate(year = str_remove_all(year, pattern = "x"),
                     year = paste0(year, "-12-31"),
                     year = lubridate::ymd(year)) %>% 
              filter(str_detect(indicator_name, "estimate")) %>% 
              mutate(indicator_name = str_extract(indicator_name, pattern = "(.*):"),
                     indicator_name = str_remove_all(indicator_name, ":")) %>% 
              mutate(value = as.double(value))

df_country <- df_country %>% 
                clean_names() %>% 
                mutate_all(~str_to_lower(.)) %>%
                select(country_code, table_name, region)

df_continent <- df_continent %>% 
                  clean_names() %>% 
                  rename(country_code = wb,
                         country_name = country_name_en) %>% 
                  mutate_at(.vars = c("continent", "country_code", "country_name"), ~str_to_lower(.))
    
# Merging Tables
df <- df_data %>% 
        inner_join(df_country %>% select(country_code, region), 
                   by = "country_code") %>% 
        inner_join(df_continent %>% select(country_code, continent, iso2c, unicode_symbol),
                   by = "country_code") %>% 
        mutate(continent = case_when(region == "latin america & caribbean" ~ "south america",
                                     region == "north america" ~ "north america",
                                     country_name == "greenland" ~ "north america",
                                     T ~ continent)) %>% 
        filter(continent != "") %>% 
        filter(value != "") %>% 
        select(-region) %>% 
        arrange(year, country_name)

# DATA TABLE
# Preparing
dt <- df %>% 
        mutate_at(.vars = c("country_name", "continent"), .funs = str_to_title) %>% 
        mutate(country_code = str_to_upper(country_code),
               year = str_sub(year, start = 1, end = 4),
               year = as.integer(year),
               value = round(value, 2)) %>% 
        select(country_name,  country_code, continent, indicator_name, year, value) %>% 
        mutate_at(.vars = c("country_name", "country_code", "indicator_name", "year") ,~as_factor(.)) %>%
        arrange(continent) %>% 
        mutate(continent = as_factor(continent)) %>%
        arrange(year, country_name) %>% 
  
# Creating
        DT::datatable(rownames = FALSE,
                      width = "100%",
                      filter = "top",
                      colnames = c('Country','Code', 'Continent', 'Indicator', "Year", "Score"),
                      class = 'cell-border stripe',
                      extensions = c("Responsive", "Buttons"),
                                    options = list(
                                                    autowidth = TRUE,
                                                    lengthMenu = c(6, 12, 25, 50),
                                                    dom = "Blfrtip",
                                                    buttons = c("copy", "csv", "excel", "print", "pdf"), 
                                                    initComplete = JS("function(settings, json) {",
    "$(this.api().table().header()).css({'background-color': '#c23d1d', 'color': '#fff'});",
    "}")))

# htmlwidgets::saveWidget(dt, file = "WGI_DT.html")
# write_csv(df, file = "./WGI_cleaned.csv")

print(df)

knitr::include_url("https://www.renanperes.com/widgets/WGI_DT.html", height = "600px")
```

# Visualizations

To better analyze the dataset, I decided to group the countries available in the dataset by continent and compare them accordingly.

You can also embed plots. See Figure \@ref(fig:pie) for example:

```{r pie, fig.cap='A fancy pie chart.', tidy=FALSE}
par(mar = c(0, 1, 0, 1))
pie(
  c(280, 60, 20),
  c('Sky', 'Sunny side of pyramid', 'Shady side of pyramid'),
  col = c('#0292D8', '#F7EA39', '#C4B632'),
  init.angle = -50, border = NA
)
```

<!-- ```{r pressure} -->

<!-- # Effectiveness -->

<!--   df_wgi %>% -->

<!--   filter(indicator_name == "Government Effectiveness: Estimate") %>% -->

<!--   mutate(indicator_name = str_replace(indicator_name, -->

<!--                                       pattern =  "Government Effectiveness: Estimate", -->

<!--                                       replacement = "Government Effectiveness")) %>% -->

<!--   group_by(continent) %>% -->

<!--   filter(continent != "NA", -->

<!--          year > 2015) %>% -->

<!--   ggplot(aes(x = year, y = value, fill = continent)) + -->

<!--   geom_boxplot(na.rm = T) + -->

<!--   # scale_fill_viridis_d(option = "mako") + -->

<!--   scale_fill_brewer(palette = "Dark2") + -->

<!--   coord_flip() + -->

<!--   geom_hline(yintercept = 0, linetype = "dashed", size = .8) + -->

<!--   labs(title = "Effectiveness", x = element_blank(), y = element_blank()) + -->

<!--   # theme_bw() + -->

<!--   cowplot::theme_cowplot() + -->

<!--   theme(axis.text = element_text(size = 14, face = "bold"), -->

<!--         title = element_text(size = 20), -->

<!--         legend.text = element_text(size = 16), -->

<!--         legend.title = element_blank()) -> p1 -->

<!-- # Control of Corruption -->

<!--   df_wgi %>% -->

<!--     filter(indicator_name == "Control of Corruption: Estimate") %>% -->

<!--     mutate(indicator_name = str_replace(indicator_name, -->

<!--                                         pattern =  "Control of Corruption: Estimate", -->

<!--                                         replacement = "Control of Corruption")) %>% -->

<!--     group_by(continent) %>% -->

<!--     filter(continent != "NA", -->

<!--            year > 2015) %>% -->

<!--     ggplot(aes(x = year, y = value, fill = continent)) + -->

<!--     geom_boxplot(na.rm = T) + -->

<!--     # scale_fill_viridis_d(option = "mako") + -->

<!--     scale_fill_brewer(palette = "Dark2") + -->

<!--     coord_flip() + -->

<!--     geom_hline(yintercept = 0, linetype = "dashed", size = .8) + -->

<!--     labs(title = "Control of Corruption", x = element_blank(), y = element_blank()) + -->

<!--     # theme_bw() + -->

<!--     cowplot::theme_cowplot() + -->

<!--     theme(axis.text = element_text(size = 14, face = "bold"), -->

<!--           title = element_text(size = 20), -->

<!--           legend.text = element_text(size = 16), -->

<!--           legend.title = element_blank()) -> p2 -->

<!-- # Regulatory Quality -->

<!--   df_wgi %>% -->

<!--     filter(indicator_name == "Regulatory Quality: Estimate") %>% -->

<!--     mutate(indicator_name = str_replace(indicator_name, -->

<!--                                         pattern =  "Regulatory Quality: Estimate", -->

<!--                                         replacement = "Regulatory Quality")) %>% -->

<!--     group_by(continent) %>% -->

<!--     filter(continent != "NA", -->

<!--            year > 2015) %>% -->

<!--     ggplot(aes(x = year, y = value, fill = continent)) + -->

<!--     geom_boxplot(na.rm = T) + -->

<!--     # scale_fill_viridis_d(option = "mako") + -->

<!--     scale_fill_brewer(palette = "Dark2") + -->

<!--     coord_flip() + -->

<!--     geom_hline(yintercept = 0, linetype = "dashed", size = .8) + -->

<!--     labs(title = "Regulatory Quality", x = element_blank(), y = element_blank()) + -->

<!--     # theme_bw() + -->

<!--     cowplot::theme_cowplot() + -->

<!--     theme(axis.text = element_text(size = 14, face = "bold"), -->

<!--           title = element_text(size = 20), -->

<!--           legend.text = element_text(size = 16), -->

<!--           legend.title = element_blank()) -> p3 -->

<!-- # Rule of Law -->

<!--   df_wgi %>% -->

<!--     filter(indicator_name == "Rule of Law: Estimate") %>% -->

<!--     mutate(indicator_name = str_replace(indicator_name, -->

<!--                                         pattern =  "Rule of Law: Estimate", -->

<!--                                         replacement = "Rule of Law")) %>% -->

<!--     group_by(continent) %>% -->

<!--     filter(continent != "NA", -->

<!--            year > 2015) %>% -->

<!--     ggplot(aes(x = year, y = value, fill = continent)) + -->

<!--     geom_boxplot(na.rm = T) + -->

<!--     # scale_fill_viridis_d(option = "mako") + -->

<!--     scale_fill_brewer(palette = "Dark2") + -->

<!--     coord_flip() + -->

<!--     geom_hline(yintercept = 0, linetype = "dashed", size = .8) + -->

<!--     labs(title = "Rule of Law", x = element_blank(), y = element_blank()) + -->

<!--     # theme_bw() + -->

<!--     cowplot::theme_cowplot() + -->

<!--     theme(axis.text = element_text(size = 14, face = "bold"), -->

<!--           title = element_text(size = 20), -->

<!--           legend.text = element_text(size = 16), -->

<!--           legend.title = element_blank()) -> p4 -->

<!-- ``` -->

## Plotly [View](/widgets/plotly.html)

```{r}
knitr::include_url("https://www.renanperes.com/widgets/plotly.html", height = "600px")
```
